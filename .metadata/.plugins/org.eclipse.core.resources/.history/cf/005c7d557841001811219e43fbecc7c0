package forIO;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

/**
 * 文件-->程序-->字节数组
 * 文件输入流    字节数组输出流
 * @author Administrator
 *
 */
public class SecondOperate {
	public static void main(String[]args) throws IOException{
		String path="D:/Class/work/Test/IoIN.java";
		String path2="D:/Class/work/Test/IoOUT.java";
		byte []data=getBytesFromFile(path);
		System.out.println(new String(data));
		fromBytesToFile(data,path2);
	}
	public static void fromBytesToFile(byte[]src,String destpath) throws IOException{
		File dest=new File(destpath);
		InputStream is=new BufferedInputStream(
				new ByteArrayInputStream(src));
		OutputStream bos=new BufferedOutputStream(
				new FileOutputStream(dest));
		
		byte[]flush=new byte[1024];
		int len=0;
		while(-1!=(len=is.read(flush))){
			bos.write(flush,0,len);
		}
		bos.flush();
		bos.close();
		is.close();
	}
			
	public static byte[] getBytesFromFile(String srcpath) throws IOException{
		File src=new File(srcpath);
		byte[]dest=null;
		//文件写入流
	
			InputStream is=new BufferedInputStream(
					new FileInputStream(src));
			ByteArrayOutputStream bos=new ByteArrayOutputStream();
			
			byte[]flush=new byte[1024];
			int len=0;
			while(-1!=(len=is.read(flush))){
				bos.write(flush,0,len);
				bos.flush();
				dest=bos.toByteArray();
			}
			bos.close();
			is.close();
		return dest;
	}
}
